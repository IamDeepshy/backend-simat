generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id         Int      @id @default(autoincrement())
  username   String   @unique
  password   String
  role       String
  created_at DateTime @default(now())
  updated_at DateTime @default(now()) @updatedAt
}

model task_management {
  id         Int      @id @default(autoincrement())
  suiteName  String
  title      String
  assignDev  String
  priority   String
  status     String
  notes      String
  created_at DateTime @default(now())
  updated_at DateTime @default(now()) @updatedAt
}


model test_run {
  id         Int      @id @default(autoincrement())
  scope      String
  scopeValue String
  totalPass  Int
  totalFail  Int
  status     String
  allureUrl  String?
  executedAt DateTime
  createdAt  DateTime @default(now())

  @@unique([scope, scopeValue])
}

model test_specs {
  id            Int      @id @default(autoincrement())
  testCaseId    String   @unique
  suiteName     String
  testName      String
  status        String
  durationMs    Int
  errorMessage  String?  @db.Text
  screenshotUrl String?
  lastRunAt     DateTime
  runId         Int
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  specPath      String?  @db.VarChar(255)

  @@index([runId], map: "test_specs_runId_fkey")
  @@unique([specPath, testName])
}